#!/bin/bash
if which nvim >/dev/null 2>&1; then
    # Use exec to replace the shell process with nvim.
    # This ensures signals (like Ctrl-C) are handled correctly and avoids
    # leaving a dormant bash process in the background.
    exec nvim "$@"
else
    # Find the original vim command, skipping this wrapper to avoid loops.
    _vim=""
    for v in $(which -a vim); do
        if [[ "$v" != *"dotfiles/bin/vim"* ]]; then
            _vim="$v"
            break
        fi
    done
    exec "$_vim" "$@"
fi
